<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Icon Builder</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", Arial, sans-serif;
        background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb);
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
        padding: 20px;
        animation: backgroundAnimation 6s infinite alternate;
      }

      @keyframes backgroundAnimation {
        0% {
          background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb);
        }
        50% {
          background: linear-gradient(135deg, #a18cd1, #fbc2eb, #fad0c4);
        }
        100% {
          background: linear-gradient(135deg, #fad0c4, #ff9a9e, #a18cd1);
        }
      }

      .container {
        background: rgba(0, 0, 0, 0.25);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        padding: 40px;
        width: 100%;
        max-width: 560px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        animation: fadeIn 1s ease-in-out;
        position: relative;
        max-height: 600px;
        overflow-y: auto;
      }

      h1 {
        font-size: 2rem;
        text-align: center;
        margin-bottom: 25px;
        color: #fff;
        text-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
      }

      label {
        font-size: 1rem;
        margin-bottom: 10px;
        display: block;
        color: #f0f0f0;
      }

      input,
      button {
        width: 100%;
        padding: 12px 15px;
        margin-bottom: 20px;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        outline: none;
        transition: all 0.3s ease;
      }

      input {
        background: rgba(255, 255, 255, 0.2);
        color: #fff;
        caret-color: #ff758c;
      }

      input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      input:focus {
        background: rgba(255, 255, 255, 0.3);
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      }

      button {
        background: linear-gradient(135deg, #ff758c, #ff7eb3);
        color: #fff;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      button:hover {
        background: linear-gradient(135deg, #ff7eb3, #ff758c);
        transform: translateY(-3px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
      }

      button:active {
        transform: translateY(0);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
      }

      .checkbox-container {
        display: flex;
        gap: 10px;
        align-items: center;
        margin-bottom: 20px;
      }

      .checkbox-container input {
        margin-right: 10px;
        width: auto;
        margin: 0;
        padding: 0;
        transform: scale(1.3);
        accent-color: #ff758c;
      }

      .checkbox-container label {
        margin: 0;
        color: #f0f0f0;
        font-size: 1rem;
      }

      .code-preview {
        margin-top: 20px;
        padding: 15px;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        border-radius: 8px;
        font-size: 0.9rem;
        overflow-x: auto;
        overflow-y: auto;
        max-height: 300px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      .code-preview pre {
        margin: 0;
        white-space: pre-wrap;
        word-wrap: break-word;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>SVG Icon exporter</h1>

      <label for="componentName">Component Name:</label>
      <input
        type="text"
        id="componentName"
        placeholder="Enter component name (e.g., IconComponent)"
        value="IconComponent"
      />

      <label for="interfaceName">Interface Name:</label>
      <input
        type="text"
        id="interfaceName"
        placeholder="Enter interface name (e.g., IconProps)"
      />

      <div class="checkbox-container">
        <input type="checkbox" id="useFramerMotion" />
        <label for="useFramerMotion">Use Framer Motion</label>
      </div>

      <div class="checkbox-container">
        <input type="checkbox" id="generateWrapper" />
        <label for="generateWrapper">Generate Icon Wrapper</label>
      </div>

      <button id="export" disabled>Export Icons</button>

      <div class="wrapper-info">
        <button
          id="exportWrapper"
          style="display: block; margin: 0 auto; position: relative"
        >
          Create Icon Wrapper

          <div
            id="popup"
            style="
              display: none;
              position: absolute;
              top: 110%;
              left: 50%;
              transform: translateX(-50%);
              background: rgba(0, 0, 0, 0.95);
              color: #fff;
              padding: 15px;
              border-radius: 10px;
              z-index: 1000;
              text-align: center;
              width: 300px;
              font-size: 0.9rem;
              line-height: 1.5;
              box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            "
          >
            <p style="margin: 0; font-weight: bold">What is the Wrapper?</p>
            <p style="margin: 10px 0">
              The wrapper is a reusable React component that simplifies the use
              of exported icons. It allows you to manage size, color, and
              animations in a centralized way.
            </p>

            <a
              href="https://github.com/IvanDF/icon-builder"
              target="_blank"
              style="color: #ff758c; text-decoration: underline"
              onclick="event.stopPropagation();"
            >
              Learn more in the documentation
            </a>
          </div>
        </button>
      </div>

      <div id="codePreview" class="code-preview">
        <pre><code id="reactCode"></code></pre>
      </div>
    </div>

    <script>
      const exportButton = document.getElementById("export");
      const codePreview = document.getElementById("codePreview");
      const reactCode = document.getElementById("reactCode");
      const componentNameInput = document.getElementById("componentName");
      const interfaceNameInput = document.getElementById("interfaceName");
      const useFramerMotionCheckbox =
        document.getElementById("useFramerMotion");
      const generateWrapperCheckbox =
        document.getElementById("generateWrapper");
      const exportWrapperButton = document.getElementById("exportWrapper");
      const popup = document.getElementById("popup");

      const notifyInputChange = () => {
        const componentName = componentNameInput.value || "IconComponent";
        const interfaceName =
          interfaceNameInput.value || "{color: string, [key: string]: string}";
        const useFramerMotion = useFramerMotionCheckbox.checked;

        parent.postMessage(
          {
            pluginMessage: {
              type: "input-changed",
              options: {
                componentName,
                interfaceName,
                useFramerMotion,
              },
            },
          },
          "*"
        );
      };

      exportButton.onclick = () => {
        const componentName = componentNameInput.value || "IconComponent";
        const interfaceName =
          interfaceNameInput.value || "{color: string, [key: string]: string}";
        const useFramerMotion = useFramerMotionCheckbox.checked;

        parent.postMessage(
          {
            pluginMessage: {
              type: "export-icons",
              options: {
                componentName,
                interfaceName,
                useFramerMotion,
              },
            },
          },
          "*"
        );
      };

      exportWrapperButton.onmouseover = () => {
        popup.style.display = "block";
      };

      exportWrapperButton.onmouseout = () => {
        popup.style.display = "none";
      };

      exportWrapperButton.onclick = () => {
        parent.postMessage(
          {
            pluginMessage: {
              type: "export-wrapper",
            },
          },
          "*"
        );
      };

      componentNameInput.addEventListener("input", notifyInputChange);
      interfaceNameInput.addEventListener("input", notifyInputChange);
      useFramerMotionCheckbox.addEventListener("change", notifyInputChange);

      window.onmessage = (event) => {
        const { type, frameName, fileName, content } =
          event.data.pluginMessage || {};

        if (type === "set-frame-name") {
          componentNameInput.value = frameName;
          exportButton.disabled = false;
        } else if (type === "multiple-frames-selected") {
          exportButton.disabled = true;
        } else if (type === "download-file") {
          const blob = new Blob([content], { type: "text/plain" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = fileName;
          a.click();
          setTimeout(() => URL.revokeObjectURL(url), 500);
        } else if (type === "preview-code") {
          reactCode.textContent = content;
        }
      };
    </script>
  </body>
</html>
